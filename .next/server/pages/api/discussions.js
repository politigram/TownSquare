"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/discussions";
exports.ids = ["pages/api/discussions"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdiscussions&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdiscussions.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdiscussions&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdiscussions.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_discussions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\discussions.js */ \"(api)/./pages/api/discussions.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_discussions_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_discussions_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/discussions\",\n        pathname: \"/api/discussions\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_discussions_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmRpc2N1c3Npb25zJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNkaXNjdXNzaW9ucy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGRpc2N1c3Npb25zLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9kaXNjdXNzaW9uc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2Rpc2N1c3Npb25zXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdiscussions&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdiscussions.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/dbConnect.js":
/*!**************************!*\
  !*** ./lib/dbConnect.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"⚠️ MONGODB_URI is missing from environment variables!\");\n}\nlet cached = global.mongoose || {\n    conn: null,\n    promise: null\n};\nasync function dbConnect() {\n    if (cached.conn) return cached.conn;\n    if (!cached.promise) {\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, {\n            useNewUrlParser: true,\n            useUnifiedTopology: true\n        }).then((mongoose)=>{\n            console.log(\"✅ MongoDB Connected\");\n            return mongoose;\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGJDb25uZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFM0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUcsTUFBTTtBQUNsQjtBQUVBLElBQUlDLFNBQVNDLE9BQU9OLFFBQVEsSUFBSTtJQUFFTyxNQUFNO0lBQU1DLFNBQVM7QUFBSztBQUU1RCxlQUFlQztJQUNiLElBQUlKLE9BQU9FLElBQUksRUFBRSxPQUFPRixPQUFPRSxJQUFJO0lBRW5DLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CSCxPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFhO1lBQzdDVSxpQkFBaUI7WUFDakJDLG9CQUFvQjtRQUN0QixHQUFHQyxJQUFJLENBQUMsQ0FBQ2I7WUFDUGMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT2Y7UUFDVDtJQUNGO0lBRUFLLE9BQU9FLElBQUksR0FBRyxNQUFNRixPQUFPRyxPQUFPO0lBQ2xDLE9BQU9ILE9BQU9FLElBQUk7QUFDcEI7QUFFQSxpRUFBZUUsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbGx5c29uXFx0b3duc3F1YXJlXFx0b3duc3F1YXJlLW12cFxcbGliXFxkYkNvbm5lY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoXCLimqDvuI8gTU9OR09EQl9VUkkgaXMgbWlzc2luZyBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlcyFcIik7XHJcbn1cclxuXHJcbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgfHwgeyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSByZXR1cm4gY2FjaGVkLmNvbm47XHJcblxyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwge1xyXG4gICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsXHJcbiAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZVxyXG4gICAgfSkudGhlbigobW9uZ29vc2UpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCLinIUgTW9uZ29EQiBDb25uZWN0ZWRcIik7XHJcbiAgICAgIHJldHVybiBtb25nb29zZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsImRiQ29ubmVjdCIsImNvbm5lY3QiLCJ1c2VOZXdVcmxQYXJzZXIiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ0aGVuIiwiY29uc29sZSIsImxvZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/dbConnect.js\n");

/***/ }),

/***/ "(api)/./models/Discussion.js":
/*!******************************!*\
  !*** ./models/Discussion.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst DiscussionSchema = new mongoose.Schema({\n    body: {\n        type: String,\n        required: true\n    },\n    section: {\n        type: String,\n        enum: [\n            \"Town Hall\",\n            \"The Pub\"\n        ],\n        required: true\n    },\n    userId: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    likes: {\n        type: Number,\n        default: 0\n    },\n    dislikes: {\n        type: Number,\n        default: 0\n    },\n    flags: {\n        type: Number,\n        default: 0\n    },\n    engagementScore: {\n        type: Number,\n        default: 0\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (mongoose.models.Discussion || mongoose.model(\"Discussion\", DiscussionSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvRGlzY3Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTUEsbUJBQW1CLElBQUlDLFNBQVNDLE1BQU0sQ0FBQztJQUMzQ0MsTUFBTTtRQUFFQyxNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDckNDLFNBQVM7UUFBRUgsTUFBTUM7UUFBUUcsTUFBTTtZQUFDO1lBQWE7U0FBVTtRQUFFRixVQUFVO0lBQUs7SUFDeEVHLFFBQVE7UUFBRUwsTUFBTUgsU0FBU0MsTUFBTSxDQUFDUSxLQUFLLENBQUNDLFFBQVE7UUFBRUMsS0FBSztRQUFRTixVQUFVO0lBQUs7SUFDNUVPLE9BQU87UUFBRVQsTUFBTVU7UUFBUUMsU0FBUztJQUFFO0lBQ2xDQyxVQUFVO1FBQUVaLE1BQU1VO1FBQVFDLFNBQVM7SUFBRTtJQUNyQ0UsT0FBTztRQUFFYixNQUFNVTtRQUFRQyxTQUFTO0lBQUU7SUFDbENHLGlCQUFpQjtRQUFFZCxNQUFNVTtRQUFRQyxTQUFTO0lBQUU7SUFDNUNJLFdBQVc7UUFBRWYsTUFBTWdCO1FBQU1MLFNBQVNLLEtBQUtDLEdBQUc7SUFBQztBQUM3QztBQUVBLGlFQUFlcEIsU0FBU3FCLE1BQU0sQ0FBQ0MsVUFBVSxJQUFJdEIsU0FBU3VCLEtBQUssQ0FBQyxjQUFjeEIsaUJBQWlCQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFsbHlzb25cXHRvd25zcXVhcmVcXHRvd25zcXVhcmUtbXZwXFxtb2RlbHNcXERpc2N1c3Npb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRGlzY3Vzc2lvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIGJvZHk6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gIHNlY3Rpb246IHsgdHlwZTogU3RyaW5nLCBlbnVtOiBbXCJUb3duIEhhbGxcIiwgXCJUaGUgUHViXCJdLCByZXF1aXJlZDogdHJ1ZSB9LCAvLyDinIUgVHdvIHZpZXdpbmcgc2VjdGlvbnNcclxuICB1c2VySWQ6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiVXNlclwiLCByZXF1aXJlZDogdHJ1ZSB9LCAvLyDinIUgVHJhY2sgcG9zdCBjcmVhdG9yXHJcbiAgbGlrZXM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgZGlzbGlrZXM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgZmxhZ3M6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgZW5nYWdlbWVudFNjb3JlOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LCAvLyDinIUgRm9yIHJhbmtpbmcgaW4gVG93biBIYWxsXHJcbiAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuRGlzY3Vzc2lvbiB8fCBtb25nb29zZS5tb2RlbChcIkRpc2N1c3Npb25cIiwgRGlzY3Vzc2lvblNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJEaXNjdXNzaW9uU2NoZW1hIiwibW9uZ29vc2UiLCJTY2hlbWEiLCJib2R5IiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwic2VjdGlvbiIsImVudW0iLCJ1c2VySWQiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwibGlrZXMiLCJOdW1iZXIiLCJkZWZhdWx0IiwiZGlzbGlrZXMiLCJmbGFncyIsImVuZ2FnZW1lbnRTY29yZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJtb2RlbHMiLCJEaXNjdXNzaW9uIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Discussion.js\n");

/***/ }),

/***/ "(api)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    username: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    karma: {\n        type: Number,\n        default: 0\n    },\n    joinedAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", UserSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsYUFBYSxJQUFJRCx3REFBZSxDQUFDO0lBQ3JDRyxVQUFVO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3ZEQyxPQUFPO1FBQUVKLE1BQU1DO1FBQVFDLFVBQVU7UUFBTUMsUUFBUTtJQUFLO0lBQ3BERSxPQUFPO1FBQUVMLE1BQU1NO1FBQVFDLFNBQVM7SUFBRTtJQUNsQ0MsVUFBVTtRQUFFUixNQUFNUztRQUFNRixTQUFTRSxLQUFLQyxHQUFHO0lBQUM7QUFDNUM7QUFFQSxpRUFBZWQsd0RBQWUsQ0FBQ2dCLElBQUksSUFBSWhCLHFEQUFjLENBQUMsUUFBUUMsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxBbGx5c29uXFx0b3duc3F1YXJlXFx0b3duc3F1YXJlLW12cFxcbW9kZWxzXFxVc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICB1c2VybmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcclxuICBrYXJtYTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSwgLy8g4pyFIFRyYWNrcyB1c2VyJ3MgcmVsaWFiaWxpdHlcclxuICBqb2luZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9XHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIFVzZXJTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJVc2VyU2NoZW1hIiwiU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJlbWFpbCIsImthcm1hIiwiTnVtYmVyIiwiZGVmYXVsdCIsImpvaW5lZEF0IiwiRGF0ZSIsIm5vdyIsIm1vZGVscyIsIlVzZXIiLCJtb2RlbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/User.js\n");

/***/ }),

/***/ "(api)/./pages/api/discussions.js":
/*!**********************************!*\
  !*** ./pages/api/discussions.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_dbConnect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/dbConnect */ \"(api)/./lib/dbConnect.js\");\n/* harmony import */ var _models_Discussion__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Discussion */ \"(api)/./models/Discussion.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../models/User */ \"(api)/./models/User.js\");\n\n\n\nasync function handler(req, res) {\n    await (0,_lib_dbConnect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    if (req.method === \"GET\") {\n        try {\n            const { sort, section } = req.query;\n            let query = {\n                section\n            };\n            let sortOption = {\n                createdAt: -1\n            }; // Default: Most Recent\n            if (section === \"Town Hall\") {\n                sortOption = {\n                    engagementScore: -1\n                }; // ✅ Prioritize reliable posters\n            }\n            if (sort === \"most_liked\") sortOption = {\n                likes: -1\n            };\n            if (sort === \"most_controversial\") sortOption = {\n                $expr: {\n                    $subtract: [\n                        \"$likes\",\n                        \"$dislikes\"\n                    ]\n                }\n            };\n            const discussions = await _models_Discussion__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find(query).sort(sortOption).populate(\"userId\", \"username karma\");\n            return res.status(200).json(discussions);\n        } catch (error) {\n            return res.status(500).json({\n                error: \"Failed to fetch discussions\"\n            });\n        }\n    }\n    if (req.method === \"POST\") {\n        const { body, section, userId } = req.body;\n        if (!body || !section || !userId) return res.status(400).json({\n            error: \"Missing required fields\"\n        });\n        try {\n            const user = await _models_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findById(userId);\n            if (!user) return res.status(404).json({\n                error: \"User not found\"\n            });\n            const newDiscussion = new _models_Discussion__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n                body,\n                section,\n                userId: user._id,\n                engagementScore: section === \"Town Hall\" ? user.karma : 0 // ✅ Uses karma only in Town Hall\n            });\n            await newDiscussion.save();\n            return res.status(201).json(newDiscussion);\n        } catch (error) {\n            return res.status(500).json({\n                error: \"Failed to create discussion\"\n            });\n        }\n    }\n    return res.status(405).json({\n        error: \"Method not allowed\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZGlzY3Vzc2lvbnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0QztBQUNLO0FBQ1o7QUFFdEIsZUFBZUcsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLE1BQU1MLDBEQUFTQTtJQUVmLElBQUlJLElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLElBQUk7WUFDRixNQUFNLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFFLEdBQUdKLElBQUlLLEtBQUs7WUFDbkMsSUFBSUEsUUFBUTtnQkFBRUQ7WUFBUTtZQUV0QixJQUFJRSxhQUFhO2dCQUFFQyxXQUFXLENBQUM7WUFBRSxHQUFHLHVCQUF1QjtZQUMzRCxJQUFJSCxZQUFZLGFBQWE7Z0JBQzNCRSxhQUFhO29CQUFFRSxpQkFBaUIsQ0FBQztnQkFBRSxHQUFHLGdDQUFnQztZQUN4RTtZQUNBLElBQUlMLFNBQVMsY0FBY0csYUFBYTtnQkFBRUcsT0FBTyxDQUFDO1lBQUU7WUFDcEQsSUFBSU4sU0FBUyxzQkFBc0JHLGFBQWE7Z0JBQUVJLE9BQU87b0JBQUVDLFdBQVc7d0JBQUM7d0JBQVU7cUJBQVk7Z0JBQUM7WUFBRTtZQUVoRyxNQUFNQyxjQUFjLE1BQU1mLCtEQUFlLENBQUNRLE9BQU9GLElBQUksQ0FBQ0csWUFBWVEsUUFBUSxDQUFDLFVBQVU7WUFDckYsT0FBT2IsSUFBSWMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0o7UUFDOUIsRUFBRSxPQUFPSyxPQUFPO1lBQ2QsT0FBT2hCLElBQUljLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBOEI7UUFDckU7SUFDRjtJQUVBLElBQUlqQixJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixNQUFNLEVBQUVnQixJQUFJLEVBQUVkLE9BQU8sRUFBRWUsTUFBTSxFQUFFLEdBQUduQixJQUFJa0IsSUFBSTtRQUMxQyxJQUFJLENBQUNBLFFBQVEsQ0FBQ2QsV0FBVyxDQUFDZSxRQUFRLE9BQU9sQixJQUFJYyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBMEI7UUFFakcsSUFBSTtZQUNGLE1BQU1HLE9BQU8sTUFBTXRCLDZEQUFhLENBQUNxQjtZQUNqQyxJQUFJLENBQUNDLE1BQU0sT0FBT25CLElBQUljLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBaUI7WUFFakUsTUFBTUssZ0JBQWdCLElBQUl6QiwwREFBVUEsQ0FBQztnQkFDbkNxQjtnQkFDQWQ7Z0JBQ0FlLFFBQVFDLEtBQUtHLEdBQUc7Z0JBQ2hCZixpQkFBaUJKLFlBQVksY0FBY2dCLEtBQUtJLEtBQUssR0FBRyxFQUFFLGlDQUFpQztZQUM3RjtZQUVBLE1BQU1GLGNBQWNHLElBQUk7WUFDeEIsT0FBT3hCLElBQUljLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNNO1FBQzlCLEVBQUUsT0FBT0wsT0FBTztZQUNkLE9BQU9oQixJQUFJYyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQThCO1FBQ3JFO0lBQ0Y7SUFFQSxPQUFPaEIsSUFBSWMsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQXFCO0FBQzVEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXEFsbHlzb25cXHRvd25zcXVhcmVcXHRvd25zcXVhcmUtbXZwXFxwYWdlc1xcYXBpXFxkaXNjdXNzaW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGJDb25uZWN0IGZyb20gXCIuLi8uLi9saWIvZGJDb25uZWN0XCI7XHJcbmltcG9ydCBEaXNjdXNzaW9uIGZyb20gXCIuLi8uLi9tb2RlbHMvRGlzY3Vzc2lvblwiO1xyXG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vLi4vbW9kZWxzL1VzZXJcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBhd2FpdCBkYkNvbm5lY3QoKTtcclxuXHJcbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiR0VUXCIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgc29ydCwgc2VjdGlvbiB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgICBsZXQgcXVlcnkgPSB7IHNlY3Rpb24gfTtcclxuXHJcbiAgICAgIGxldCBzb3J0T3B0aW9uID0geyBjcmVhdGVkQXQ6IC0xIH07IC8vIERlZmF1bHQ6IE1vc3QgUmVjZW50XHJcbiAgICAgIGlmIChzZWN0aW9uID09PSBcIlRvd24gSGFsbFwiKSB7XHJcbiAgICAgICAgc29ydE9wdGlvbiA9IHsgZW5nYWdlbWVudFNjb3JlOiAtMSB9OyAvLyDinIUgUHJpb3JpdGl6ZSByZWxpYWJsZSBwb3N0ZXJzXHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNvcnQgPT09IFwibW9zdF9saWtlZFwiKSBzb3J0T3B0aW9uID0geyBsaWtlczogLTEgfTtcclxuICAgICAgaWYgKHNvcnQgPT09IFwibW9zdF9jb250cm92ZXJzaWFsXCIpIHNvcnRPcHRpb24gPSB7ICRleHByOiB7ICRzdWJ0cmFjdDogW1wiJGxpa2VzXCIsIFwiJGRpc2xpa2VzXCJdIH0gfTtcclxuXHJcbiAgICAgIGNvbnN0IGRpc2N1c3Npb25zID0gYXdhaXQgRGlzY3Vzc2lvbi5maW5kKHF1ZXJ5KS5zb3J0KHNvcnRPcHRpb24pLnBvcHVsYXRlKFwidXNlcklkXCIsIFwidXNlcm5hbWUga2FybWFcIik7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkaXNjdXNzaW9ucyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gZmV0Y2ggZGlzY3Vzc2lvbnNcIiB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlmIChyZXEubWV0aG9kID09PSBcIlBPU1RcIikge1xyXG4gICAgY29uc3QgeyBib2R5LCBzZWN0aW9uLCB1c2VySWQgfSA9IHJlcS5ib2R5O1xyXG4gICAgaWYgKCFib2R5IHx8ICFzZWN0aW9uIHx8ICF1c2VySWQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXCIgfSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJVc2VyIG5vdCBmb3VuZFwiIH0pO1xyXG5cclxuICAgICAgY29uc3QgbmV3RGlzY3Vzc2lvbiA9IG5ldyBEaXNjdXNzaW9uKHtcclxuICAgICAgICBib2R5LFxyXG4gICAgICAgIHNlY3Rpb24sXHJcbiAgICAgICAgdXNlcklkOiB1c2VyLl9pZCxcclxuICAgICAgICBlbmdhZ2VtZW50U2NvcmU6IHNlY3Rpb24gPT09IFwiVG93biBIYWxsXCIgPyB1c2VyLmthcm1hIDogMCAvLyDinIUgVXNlcyBrYXJtYSBvbmx5IGluIFRvd24gSGFsbFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGF3YWl0IG5ld0Rpc2N1c3Npb24uc2F2ZSgpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24obmV3RGlzY3Vzc2lvbik7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gY3JlYXRlIGRpc2N1c3Npb25cIiB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiBcIk1ldGhvZCBub3QgYWxsb3dlZFwiIH0pO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJkYkNvbm5lY3QiLCJEaXNjdXNzaW9uIiwiVXNlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzb3J0Iiwic2VjdGlvbiIsInF1ZXJ5Iiwic29ydE9wdGlvbiIsImNyZWF0ZWRBdCIsImVuZ2FnZW1lbnRTY29yZSIsImxpa2VzIiwiJGV4cHIiLCIkc3VidHJhY3QiLCJkaXNjdXNzaW9ucyIsImZpbmQiLCJwb3B1bGF0ZSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImJvZHkiLCJ1c2VySWQiLCJ1c2VyIiwiZmluZEJ5SWQiLCJuZXdEaXNjdXNzaW9uIiwiX2lkIiwia2FybWEiLCJzYXZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/discussions.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdiscussions&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cdiscussions.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();